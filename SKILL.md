---
name: antigravity-core-skills
description: "р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕бр╕▓р╕Хр╕гр╕Рр╕▓р╕Щр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╣Бр╕ер╕░р╕Вр╣Йр╕нр╕Др╕зр╕гр╕гр╕░р╕зр╕▒р╕З (Knowledge Base) р╕кр╕│р╕лр╕гр╕▒р╕Ъ AI Agent р╣Ар╕Юр╕╖р╣Ир╕нр╕ер╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Фр╣Гр╕Щр╕нр╕Щр╕▓р╕Др╕Х"
---

# ЁЯза Antigravity's Core Knowledge & Workflow Standards

р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Щр╕╡р╣Йр╕гр╕зр╕Ър╕гр╕зр╕б **"р╕Ър╕Чр╣Ар╕гр╕╡р╕вр╕Щр╕гр╕▓р╕Др╕▓р╣Бр╕Юр╕З" (Lessons Learned)** р╣Бр╕ер╕░ **"р╕бр╕▓р╕Хр╕гр╕Рр╕▓р╕Щр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ"** р╕Ир╕▓р╕Бр╕Чр╕╕р╕Бр╣Вр╕Ыр╕гр╣Ар╕Ир╕Др╕Чр╕╡р╣Ир╕Ьр╣Ир╕▓р╕Щр╕бр╕▓ р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Др╕гр╕▒р╣Йр╕Зр╕Хр╣Ир╕нр╣Др╕Ыр╕гр╕▓р╕Ър╕гр╕╖р╣Ир╕Щ р╕ер╕Фр╕Др╕зр╕▓р╕бр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Фр╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щ р╣Бр╕ер╕░р╕гр╕▒р╕Бр╕йр╕▓р╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕Зр╕▓р╕Щр╕гр╕░р╕Фр╕▒р╕Ър╕кр╕╣р╕З

---

## 1. ЁЯПЧя╕П Architecture: Hybrid Cloud (PWA + Google Apps Script)
*р╣Гр╕Кр╣Йр╕кр╕│р╕лр╕гр╕▒р╕Ър╣Вр╕Ыр╕гр╣Ар╕Ир╕Др╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г Offline-First р╣Бр╕Хр╣Ир╕вр╕▒р╕З Sync р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕З Google Sheets р╣Др╕Фр╣Й*

### 1.1 Data Type Safety (р╕Бр╕Ор╣Ар╕лр╕ер╣Зр╕Бр╣Ар╕гр╕╖р╣Ир╕нр╕З ID) ЁЯЪи
*   **р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ър╕Ър╣Ир╕нр╕в:** Google Sheets р╕Кр╕нр╕Ър╣Бр╕Ыр╕ер╕З ID р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щр╕Хр╕▒р╕зр╣Ар╕ер╕В (р╣Ар╕Кр╣Ир╕Щ "123456") р╣Гр╕лр╣Йр╕Бр╕ер╕▓р╕вр╣Ар╕Ыр╣Зр╕Щ `Number` р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕гр╕▓р╕нр╣Ир╕▓р╕Щр╕Бр╕ер╕▒р╕Ър╕бр╕▓
*   **р╕Ьр╕ер╕Бр╕гр╕░р╕Чр╕Ъ:** р╕Чр╕│р╣Гр╕лр╣Йр╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓р╕лр╕гр╕╖р╕нр╕ер╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щ JS р╕Юр╕▒р╕З (`"123" !== 123`)
*   **р╣Бр╕Щр╕зр╕Чр╕▓р╕Зр╣Бр╕Бр╣Йр╣Др╕В:**
    *   **Frontend Check:** р╕Хр╕нр╕Щ `pullFromCloud` р╕Хр╣Йр╕нр╕Зр╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╣Бр╕Ыр╕ер╕З ID р╕Чр╕╕р╕Бр╕Хр╕▒р╕зр╣Гр╕лр╣Йр╣Ар╕Ыр╣Зр╕Щ String р╣Ар╕кр╕бр╕н (`id: String(item.id)`).
    *   **Comparison:** р╣Ар╕зр╕ер╕▓р╣Ар╕Ыр╕гр╕╡р╕вр╕Ър╣Ар╕Чр╕╡р╕вр╕Ъ ID р╕лр╕▓р╕Бр╣Др╕бр╣Ир╕бр╕▒р╣Ир╕Щр╣Гр╕Ир╣Гр╕лр╣Йр╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ String р╕Бр╣Ир╕нр╕Щр╣Ар╕Чр╕╡р╕вр╕Ъ

### 1.2 Sync Strategy (Overwrite vs Delta)
*   **Simple Apps:** р╣Гр╕Кр╣Йр╕гр╕░р╕Ър╕Ъ **"р╕ер╣Йр╕▓р╕Зр╣Бр╕ер╣Йр╕зр╣Ар╕Вр╕╡р╕вр╕Щр╣Гр╕лр╕бр╣И" (Clear & Overwrite)** р╣Гр╕Щр╕Эр╕▒р╣Ир╕З Google Sheets р╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕вр╕Чр╕╡р╣Ир╕кр╕╕р╕Ф р╕ер╕Фр╕Ыр╕▒р╕Нр╕лр╕▓ Transaction Conflict
*   **Offline Mode:** р╣Бр╕Бр╣Йр╣Др╕В LocalStorage р╕Бр╣Ир╕нр╕Щр╣Ар╕кр╕бр╕н р╣Бр╕ер╣Йр╕зр╕Др╣Ир╕нр╕в Trigger Sync (Background) р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Й UX р╕ер╕╖р╣Ир╕Щр╣Др╕лр╕е

---

## 2. ЁЯЪА Backend: Google Apps Script (GAS)

### 2.1 Deployment Rules
*   **New Deployment Only:** р╕Чр╕╕р╕Бр╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Вр╕Др╣Йр╕Ф `.gs` р╕Хр╣Йр╕нр╕Зр╕вр╣Йр╕│ USER р╣Гр╕лр╣Йр╕Чр╕│ **"New Deployment"** р╣Ар╕кр╕бр╕н (р╕Бр╕▓р╕г Save р╣Ар╕Йр╕вр╣Ж р╣Др╕бр╣Ир╕Юр╕нр╕кр╕│р╕лр╕гр╕▒р╕Ъ Web App)
*   **Full Code Delivery:** р╕лр╣Йр╕▓р╕бр╕кр╣Ир╕З Code Snippet р╣Гр╕лр╣Й USER р╣Др╕Ыр╣Бр╕Ыр╕░р╣Ар╕нр╕З р╣Гр╕лр╣Йр╕кр╣Ир╕З **"р╣Др╕Яр╕ер╣Мр╣Ар╕Хр╣Зр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕Щр╣Йр╕▓"** р╣Ар╕кр╕бр╕н р╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╕Бр╕▓р╕гр╕зр╕▓р╕Зр╕Ьр╕┤р╕Фр╕Ър╕гр╕гр╕Чр╕▒р╕Ф

### 2.2 Data Integrity
*   **doPost Handling:** р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ `doPost(e)` р╣Ар╕Ыр╣Зр╕Щр╕лр╕▒р╕зр╣Гр╕Ир╕лр╕ер╕▒р╕Б р╕Хр╣Йр╕нр╕Зр╣Ар╕Вр╕╡р╕вр╕Щ `try-catch` р╕Др╕гр╕нр╕Ър╣Ар╕кр╕бр╕н р╣Бр╕ер╕░р╕Хр╣Йр╕нр╕З Return `ContentService` р╣Ар╕Ыр╣Зр╕Щ JSON р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ
*   **String Only:** р╕Бр╕▓р╕гр╕гр╕▒р╕Ър╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╣Ир╕▓р╕Щ `doPost` р╕Хр╣Йр╕нр╕Зр╕кр╣Ир╕Зр╣Бр╕Ър╕Ъ String (JSON.stringify) р╣Ар╕кр╕бр╕н

---

## 3. ЁЯОи Frontend & UI Standards (Premium UX)

### 3.1 PWA & Caching Lifecycle
*   **Version Bumping:** р╕Чр╕╕р╕Бр╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣Ир╣Бр╕Бр╣Йр╣Вр╕Др╣Йр╕Ф Logic р╕кр╕│р╕Др╕▒р╕Н (JS) р╕лр╕гр╕╖р╕нр╣Бр╕Бр╣Й Bug р╕Хр╣Йр╕нр╕Зр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Хр╕▒р╕зр╣Ар╕ер╕Вр╕гр╕╕р╣Ир╕Щ `CACHE_NAME` р╣Гр╕Щ `sw.js` (р╣Ар╕Кр╣Ир╕Щ `v10` -> `v11`) р╣Ар╕кр╕бр╕н р╣Ар╕Юр╕╖р╣Ир╕нр╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╣Гр╕лр╣Йр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З USER р╣Вр╕лр╕ер╕Фр╣Вр╕Др╣Йр╕Фр╣Гр╕лр╕бр╣И
*   **Cache Strategy:** р╣Др╕Яр╕ер╣Мр╕кр╕│р╕Др╕▒р╕Н (`index.html`, `app.js`) р╕Др╕зр╕гр╣Гр╕Кр╣Й Network First р╕лр╕гр╕╖р╕н Stale-While-Revalidate

### 3.2 Resilience (р╕Др╕зр╕▓р╕бр╕Чр╕Щр╕Чр╕▓р╕Щр╕Вр╕нр╕З UI)
*   **Safeguards:** р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕кр╕│р╕Др╕▒р╕Н (Edit, Delete, Submit) р╕Хр╣Йр╕нр╕Зр╕Др╕гр╕нр╕Ъ `try-catch` р╣Ар╕кр╕бр╕н р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╕кр╕▓р╕бр╕▓р╕гр╕Ц `alert` р╣Бр╕Ир╣Йр╕З USER р╣Др╕Фр╣Йр╕лр╕▓р╕Бр╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф р╕Фр╕╡р╕Бр╕зр╣Ир╕▓р╕Ыр╕ер╣Ир╕нр╕вр╣Гр╕лр╣Йр╣Ар╕Зр╕╡р╕вр╕Ър╣Др╕Ы
*   **Input Protection:** р╕лр╣Йр╕▓р╕бр╣Ар╕Вр╕╡р╕вр╕Щр╣Вр╕Др╣Йр╕Фр╕Чр╕╡р╣И Reset р╕Др╣Ир╕▓р╕Чр╕╡р╣И USER р╕Бр╕гр╕нр╕Бр╣Др╕зр╣Й (р╣Ар╕Кр╣Ир╕Щ р╕зр╕▒р╕Щр╕Чр╕╡р╣И) р╣Вр╕Фр╕вр╣Др╕бр╣Ир╕Ир╕│р╣Ар╕Ыр╣Зр╕Щ (р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: `setTxType` р╕Хр╣Йр╕нр╕Зр╣Др╕бр╣Ир╕ер╣Йр╕▓р╕Зр╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕Чр╕┤р╣Йр╕Зр╕Цр╣Йр╕▓р╣Ар╕Ыр╣Зр╕Щр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В)

### 3.3 Typography & Theme (Cute Aesthetics) ЁЯОА
*   **Font Choice:** р╕Яр╕нр╕Щр╕Хр╣Мр╕Чр╕╡р╣Ир╣Бр╕Щр╕░р╕Щр╕│р╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╣Др╕Хр╕ер╣Мр╕Щр╣Ир╕▓р╕гр╕▒р╕Б/р╣Ар╕Ыр╣Зр╕Щр╕Бр╕▒р╕Щр╣Ар╕нр╕З р╕Др╕╖р╕н **'Mali'** (Google Fonts)
    *   *р╣Ар╕лр╕Хр╕╕р╕Ьр╕е:* р╣Гр╕лр╣Йр╕Др╕зр╕▓р╕бр╕гр╕╣р╣Йр╕кр╕╢р╕Бр╣Ар╕лр╕бр╕╖р╕нр╕Щр╕ер╕▓р╕вр╕бр╕╖р╕нр╣Ар╕Вр╕╡р╕вр╕Щ р╕кр╕Ър╕▓р╕вр╕Хр╕▓ р╣Ар╕лр╕бр╕▓р╕░р╕Бр╕▒р╕Ъ Family App
*   **Alternatives:**
    *   р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Др╕зр╕▓р╕бр╕кр╕Щр╕╕р╕Бр╕кр╕Щр╕▓р╕Щ: **'Itim'** р╕лр╕гр╕╖р╕н **'Kodchasan'**
    *   р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Др╕зр╕▓р╕бр╕Чр╕▒р╕Щр╕кр╕бр╕▒р╕в: **'Kanit'** (Standard Thai Font)
*   **Implementation:** р╕Хр╣Йр╕нр╕З `@import` р╕Ир╕▓р╕Б Google Fonts р╣Ар╕кр╕бр╕н р╣Бр╕ер╕░р╕Бр╕│р╕лр╕Щр╕Ф `font-family` р╣Гр╕Щ `body` р╣Гр╕лр╣Йр╕Др╕гр╕нр╕Ър╕Др╕ер╕╕р╕бр╕Чр╕╕р╕Б OS

---

## 4. ЁЯЫая╕П Troubleshooting Checklist (р╣Бр╕Щр╕зр╕Чр╕▓р╕Зр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╕Ър╕▒р╣Кр╕Б)

р╕Бр╣Ир╕нр╕Щр╕Ир╕░р╣Ар╕гр╕┤р╣Ир╕бр╣Бр╕Бр╣Йр╣Вр╕Др╣Йр╕Фр╕бр╕▒р╣Ир╕зр╣Ж р╣Гр╕лр╣Йр╣Ар╕Кр╣Зр╕Др╕Хр╕▓р╕бр╕ер╕│р╕Фр╕▒р╕Ър╕Щр╕╡р╣Й:
1.  **Version Check:** USER р╣Гр╕Кр╣Й `sw.js` р╣Ар╕зр╕нр╕гр╣Мр╕Кр╕▒р╣Ир╕Щр╕ер╣Ир╕▓р╕кр╕╕р╕Фр╕лр╕гр╕╖р╕нр╕вр╕▒р╕З? (р╣Гр╕лр╣Й Refresh)
2.  **Deployment Check:** USER р╣Др╕Фр╣Й Redeploy Google Script р╕лр╕гр╕╖р╕нр╕вр╕▒р╕З?
3.  **Type Check:** ID р╕Чр╕╡р╣Ир╕кр╣Ир╕Зр╣Др╕Ыр╕Бр╕▒р╕Ър╕Чр╕╡р╣Ир╕гр╕▒р╕Ър╕бр╕▓ р╣Ар╕Ыр╣Зр╕Щ Type р╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щр╣Др╕лр╕б?
4.  **Syntax Check:** р╕бр╕╡р╕зр╕Зр╣Ар╕ер╣Зр╕Ър╕Ыр╕╡р╕Бр╕Бр╕▓ `{ }` р╕Др╕гр╕Ър╣Др╕лр╕б? (р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Фр╣Йр╕зр╕вр╕кр╕▓р╕вр╕Хр╕▓р╕лр╕гр╕╖р╕н Tools р╕Бр╣Ир╕нр╕Щр╕кр╣Ир╕З)

---

## 5. ЁЯЧгя╕П Communication Style (р╕Бр╕▓р╕гр╕кр╕╖р╣Ир╕нр╕кр╕▓р╕гр╕Бр╕▒р╕Ъ USER)

*   **Explain the "Why":** р╕нр╕вр╣Ир╕▓р╕Ър╕нр╕Бр╣Бр╕Др╣Ир╣Гр╕лр╣Йр╕Бр╕Фр╕Ыр╕╕р╣Ир╕б р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Фр╣Йр╕зр╕вр╕зр╣Ир╕▓р╕Чр╕│р╣Др╕б (р╣Ар╕Кр╣Ир╕Щ "р╕Хр╣Йр╕нр╕Зр╕Бр╕Ф Redeploy р╣Ар╕Фр╕╡р╣Лр╕вр╕зр╕бр╕▒р╕Щр╕гр╕▒р╕Щр╣Вр╕Др╣Йр╕Фр╣Ар╕Бр╣Ир╕▓р╕Щр╕░р╕Др╕гр╕▒р╕Ъ")
*   **Status Indicators:** р╕кр╕нр╕Щр╣Гр╕лр╣Й USER р╕кр╕▒р╕Зр╣Ар╕Бр╕Хр╕кр╕Цр╕▓р╕Щр╕░ (р╣Ар╕Кр╣Ир╕Щ "р╕гр╕нр╕Ир╕Щр╕Бр╕зр╣Ир╕▓р╕Ир╕░р╕Вр╕╢р╣Йр╕Щ тЬЕ Saved р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з")
*   **Proactive Fix:** р╕Цр╣Йр╕▓р╣Ар╕лр╣Зр╕Щр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Др╕лр╕Щр╕лр╕▓р╕вр╣Др╕Ы (р╣Ар╕Кр╣Ир╕Щ `setTxType`) р╣Гр╕лр╣Йр╣Ар╕Вр╕╡р╕вр╕Щр╕Вр╕╢р╣Йр╕Щр╕бр╕▓р╣Гр╕лр╕бр╣Ир╣Ар╕ер╕в р╕нр╕вр╣Ир╕▓р╕гр╕нр╕Цр╕▓р╕б

---
*р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Щр╕╡р╣Йр╕Ир╕░р╕Цр╕╣р╕Бр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Ар╕гр╕╖р╣Ир╕нр╕вр╣Ж р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕гр╕▓р╣Ар╕гр╕╡р╕вр╕Щр╕гр╕╣р╣Йр╣Ар╕Чр╕Др╕Щр╕┤р╕Др╣Гр╕лр╕бр╣Ир╣Ж р╕лр╕гр╕╖р╕нр╣Ар╕Ир╕нр╕Ър╕▒р╣Кр╕Бр╕Чр╕╡р╣Ир╕Щр╣Ир╕▓р╕кр╕Щр╣Гр╕И*
