<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#FFF9F0">
    <meta name="description" content="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏π‡∏ö‡∏¥‡∏ß - ‡πÅ‡∏≠‡∏û‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏π‡∏ö‡∏¥‡∏ß">

    <title>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏π‡∏ö‡∏¥‡∏ß</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/icon-192.png">

    <!-- Google Fonts - Mali -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@300;400;500;600;700&family=Viga&display=swap"
        rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Flatpickr (Date Picker) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/th.js"></script>

    <!-- Main CSS -->
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <div id="app" class="app-container">

        <!-- ==================== HEADER ==================== -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏π‡∏ö‡∏¥‡∏ß</h1>
                <div class="sync-status" id="syncStatus" title="‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Sync">
                    <span class="sync-icon">&#10003;</span>
                </div>
            </div>
        </header>

        <!-- ==================== MAIN CONTENT ==================== -->
        <main class="main-content">

            <!-- ========== PAGE: DASHBOARD ========== -->
            <section id="page-dashboard" class="page active">
                <!-- Month Picker -->
                <div class="month-picker-container" role="group" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô">
                    <button class="month-nav-btn" id="prevMonth" aria-label="‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤">&lt;</button>
                    <button class="month-picker-btn" id="monthPicker" aria-live="polite">
                        <span id="currentMonthDisplay">‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2026</span>
                        <span class="dropdown-arrow" aria-hidden="true">&#9662;</span>
                    </button>
                    <button class="month-nav-btn" id="nextMonth" aria-label="‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ">&gt;</button>
                </div>

                <!-- Summary Cards -->
                <div class="summary-cards" role="region" aria-label="‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢">
                    <div class="summary-card income">
                        <div class="card-icon" aria-hidden="true">&#128176;</div>
                        <div class="card-content">
                            <span class="card-label" id="incomeLabel">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</span>
                            <span class="card-amount" id="totalIncome" aria-live="polite"
                                aria-labelledby="incomeLabel">0 &#3647;</span>
                        </div>
                    </div>
                    <div class="summary-card expense">
                        <div class="card-icon" aria-hidden="true">&#128184;</div>
                        <div class="card-content">
                            <span class="card-label" id="expenseLabel">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</span>
                            <span class="card-amount" id="totalExpense" aria-live="polite"
                                aria-labelledby="expenseLabel">0 &#3647;</span>
                        </div>
                    </div>
                    <div class="summary-card balance">
                        <div class="card-icon" aria-hidden="true">&#128181;</div>
                        <div class="card-content">
                            <span class="card-label" id="balanceLabel">‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</span>
                            <span class="card-amount" id="totalBalance" aria-live="polite"
                                aria-labelledby="balanceLabel">0 &#3647;</span>
                        </div>
                    </div>
                </div>

                <!-- Budget Progress -->
                <div class="budget-section">
                    <div class="budget-header">
                        <span class="budget-title">&#128202; ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</span>
                        <span class="budget-edit" id="editBudget">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</span>
                    </div>
                    <div class="budget-progress-container">
                        <div class="budget-progress-bar">
                            <div class="budget-progress-fill" id="budgetProgressFill" style="width: 0%"></div>
                        </div>
                        <div class="budget-info">
                            <span id="budgetUsed">‡πÉ‡∏ä‡πâ‡πÑ‡∏õ 0 &#3647;</span>
                            <span id="budgetTotal">/ 0 &#3647;</span>
                            <span class="budget-percent" id="budgetPercent">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Chart -->
                <div class="chart-section">
                    <h3 class="section-title">&#128200; ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h3>
                    <div class="chart-container">
                        <canvas id="expensePieChart"></canvas>
                    </div>
                    <div id="noDataMessage" class="no-data-message" style="display: none;">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
                    </div>
                </div>

                <!-- Recent Transactions -->
                <div class="recent-section">
                    <div class="section-header">
                        <h3 class="section-title">&#128221; ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                        <button class="see-all-btn" data-page="transactions">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î &gt;</button>
                    </div>
                    <div class="transaction-list" id="recentTransactions">
                        <!-- Transactions will be rendered here -->
                    </div>
                </div>

                <!-- Quick Add Button -->
                <button class="fab-button" id="quickAddBtn" title="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" aria-label="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà">
                    <span aria-hidden="true">üê∑</span>
                </button>
            </section>

            <!-- ========== PAGE: ADD/EDIT TRANSACTION ========== -->
            <section id="page-add" class="page" aria-labelledby="addPageTitle">
                <div class="page-header">
                    <button class="back-btn" data-page="dashboard" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">&lt;</button>
                    <h2 class="page-title" id="addPageTitle">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</h2>
                    <div class="header-spacer"></div>
                </div>

                <form id="transactionForm" class="transaction-form">
                    <input type="hidden" id="editTransactionId" value="">

                    <!-- Transaction Type -->
                    <div class="form-group">
                        <label class="form-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                        <div class="type-toggle">
                            <button type="button" class="type-btn expense active" data-type="expense">
                                &#128184; ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢
                            </button>
                            <button type="button" class="type-btn income" data-type="income">
                                &#128176; ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö
                            </button>
                        </div>
                    </div>

                    <!-- Date -->
                    <div class="form-group">
                        <label class="form-label" for="txDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                        <input type="text" id="txDate" class="form-input date-input" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà" required>
                    </div>

                    <!-- Amount -->
                    <div class="form-group">
                        <label class="form-label" for="txAmount">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="txAmount" class="form-input amount-input" placeholder="0.00" min="0"
                            step="0.01" required inputmode="decimal">
                    </div>

                    <!-- Category -->
                    <div class="form-group">
                        <label class="form-label" for="txCategory">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                        <select id="txCategory" class="form-input category-select" required>
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà...</option>
                        </select>
                    </div>

                    <!-- Description -->
                    <div class="form-group">
                        <label class="form-label" for="txDescription">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                        <input type="text" id="txDescription" class="form-input"
                            placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á, ‡∏Ñ‡πà‡∏≤‡∏£‡∏ñ BTS">
                    </div>

                    <!-- Receipt Upload -->
                    <div class="form-group">
                        <label class="form-label">‡πÅ‡∏ô‡∏ö‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                        <div class="receipt-upload">
                            <input type="file" id="txReceipt" accept="image/*" capture="environment" hidden>
                            <button type="button" class="upload-btn" id="uploadReceiptBtn">
                                &#128247; ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ / ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û
                            </button>
                            <div class="receipt-preview" id="receiptPreview" style="display: none;">
                                <img id="receiptImage" src="" alt="‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à">
                                <button type="button" class="remove-receipt-btn" id="removeReceiptBtn">&times;</button>
                            </div>
                        </div>
                    </div>

                    <!-- Tags -->
                    <div class="form-group">
                        <label class="form-label" for="txTags">‡πÅ‡∏ó‡πá‡∏Å (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                        <input type="text" id="txTags" class="form-input"
                            placeholder="‡πÄ‡∏ä‡πà‡∏ô #‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô #‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á)">
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="submit-btn" id="submitBtn">
                        &#128190; ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                    </button>

                    <!-- Delete Button (for edit mode) -->
                    <button type="button" class="delete-btn" id="deleteBtn" style="display: none;">
                        &#128465; ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ
                    </button>
                </form>
            </section>

            <!-- ========== PAGE: TRANSACTIONS LIST ========== -->
            <section id="page-transactions" class="page" aria-labelledby="transactionsPageTitle">
                <div class="page-header">
                    <button class="back-btn" data-page="dashboard" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">&lt;</button>
                    <h2 class="page-title" id="transactionsPageTitle">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                    <div class="header-spacer"></div>
                </div>

                <!-- Filters -->
                <div class="filters-container">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label>‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                            <input type="text" id="filterDateRange" class="filter-input" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô">
                        </div>
                    </div>
                    <div class="filter-row">
                        <div class="filter-group">
                            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                            <select id="filterType" class="filter-input">
                                <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                <option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
                                <option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                            <select id="filterCategory" class="filter-input">
                                <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                            </select>
                        </div>
                    </div>
                    <div class="filter-summary" id="filterSummary">
                        <span>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö: <strong id="filteredIncome">0 &#3647;</strong></span>
                        <span>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢: <strong id="filteredExpense">0 &#3647;</strong></span>
                    </div>
                </div>

                <!-- Transaction List -->
                <div class="transaction-list full-list" id="allTransactions">
                    <!-- Transactions will be rendered here -->
                </div>

                <div class="empty-state" id="emptyTransactions" style="display: none;">
                    <div class="empty-icon">&#128221;</div>
                    <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ</p>
                </div>
            </section>

            <!-- ========== PAGE: REPORTS ========== -->
            <section id="page-reports" class="page" aria-labelledby="reportsPageTitle">
                <div class="page-header">
                    <button class="back-btn" data-page="dashboard" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">&lt;</button>
                    <h2 class="page-title" id="reportsPageTitle">&#128202; ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≤‡∏ü</h2>
                    <div class="header-spacer"></div>
                </div>

                <!-- Report Period Selector -->
                <div class="report-period-selector" role="tablist" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô">
                    <button class="period-btn active" data-period="month" role="tab"
                        aria-selected="true">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
                    <button class="period-btn" data-period="year" role="tab" aria-selected="false">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</button>
                </div>

                <div class="month-picker-container" role="group" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤">
                    <button class="month-nav-btn" id="reportPrevMonth" aria-label="‡∏ä‡πà‡∏ß‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤">&lt;</button>
                    <button class="month-picker-btn" id="reportMonthPicker" aria-live="polite">
                        <span id="reportMonthDisplay">‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2026</span>
                    </button>
                    <button class="month-nav-btn" id="reportNextMonth" aria-label="‡∏ä‡πà‡∏ß‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ">&gt;</button>
                </div>

                <!-- Income vs Expense Chart -->
                <div class="chart-section">
                    <h3 class="section-title">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö vs ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h3>
                    <div class="chart-container bar-chart">
                        <canvas id="incomeExpenseChart"></canvas>
                    </div>
                </div>

                <!-- Category Breakdown -->
                <div class="chart-section">
                    <h3 class="section-title">‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h3>
                    <div class="chart-container">
                        <canvas id="categoryPieChart"></canvas>
                    </div>
                </div>

                <!-- Daily Trend -->
                <div class="chart-section">
                    <h3 class="section-title">‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h3>
                    <div class="chart-container line-chart">
                        <canvas id="dailyTrendChart"></canvas>
                    </div>
                </div>

                <!-- Top Expenses -->
                <div class="top-expenses-section">
                    <h3 class="section-title">&#127942; Top 10 ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h3>
                    <div class="top-expenses-list" id="topExpensesList">
                        <!-- Top expenses will be rendered here -->
                    </div>
                </div>

                <!-- Export Button -->
                <div class="export-section">
                    <button class="export-btn" id="exportCsvBtn">
                        &#128229; Export CSV
                    </button>
                </div>
            </section>

            <!-- ========== PAGE: SETTINGS ========== -->
            <section id="page-settings" class="page" aria-labelledby="settingsPageTitle">
                <div class="page-header">
                    <button class="back-btn" data-page="dashboard" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">&lt;</button>
                    <h2 class="page-title" id="settingsPageTitle">&#9881;&#65039; ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h2>
                    <div class="header-spacer"></div>
                </div>

                <!-- Budget Setting -->
                <div class="settings-section">
                    <h3 class="settings-title">&#128176; ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h3>
                    <div class="settings-item">
                        <label for="monthlyBudget">‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</label>
                        <div class="budget-input-group">
                            <input type="number" id="monthlyBudget" class="form-input" placeholder="20000" min="0"
                                step="100">
                            <span class="currency-label">&#3647;</span>
                        </div>
                    </div>
                    <div class="settings-item">
                        <label for="budgetAlert">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ñ‡∏∂‡∏á</label>
                        <div class="budget-input-group">
                            <input type="number" id="budgetAlert" class="form-input" value="80" min="50" max="100"
                                step="5">
                            <span class="currency-label">%</span>
                        </div>
                    </div>
                    <button class="save-settings-btn" id="saveBudgetSettings">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</button>
                </div>

                <!-- Categories Management -->
                <div class="settings-section">
                    <h3 class="settings-title">&#127991;&#65039; ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h3>
                    <button class="settings-link-btn" id="manageCategoriesBtn">
                        ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà &gt;
                    </button>
                </div>

                <!-- Theme -->
                <div class="settings-section">
                    <h3 class="settings-title">&#127912; ‡∏ò‡∏µ‡∏°</h3>
                    <div class="settings-item toggle-item">
                        <label for="darkModeToggle">‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î (Dark Mode)</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Sync -->
                <div class="settings-section">
                    <h3 class="settings-title">&#128259; Sync ‡∏Å‡∏±‡∏ö Google Sheets</h3>
                    <div class="sync-info">
                        <span id="lastSyncTime">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢ Sync</span>
                    </div>
                    <div class="sync-buttons">
                        <button class="sync-btn" id="syncNowBtn">&#128259; Sync ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
                        <button class="sync-btn secondary" id="pullFromCloudBtn">&#128229; ‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å Cloud</button>
                    </div>
                    <div class="settings-item">
                        <label for="gasUrl">Google Apps Script URL</label>
                        <input type="url" id="gasUrl" class="form-input" placeholder="‡∏ß‡∏≤‡∏á URL ‡∏Ç‡∏≠‡∏á Web App ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà">
                    </div>
                    <button class="save-settings-btn" id="saveGasUrl">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å URL</button>
                </div>

                <!-- Data Management -->
                <div class="settings-section danger-zone">
                    <h3 class="settings-title">&#9888;&#65039; ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                    <button class="sync-btn" id="forcePullCloudBtn">‚òÅÔ∏è ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Cloud ‡∏ó‡∏±‡∏ö</button>
                    <p style="font-size: 0.8rem; color: var(--text-muted); margin: 8px 0 16px;">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
                        ‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å Google Sheet ‡∏°‡∏≤‡πÅ‡∏ó‡∏ô</p>
                    <button class="danger-btn" id="clearCacheBtn">‡∏•‡πâ‡∏≤‡∏á Cache</button>
                    <button class="danger-btn" id="clearAllDataBtn">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                </div>

                <!-- About -->
                <div class="settings-section about-section">
                    <h3 class="settings-title">&#128221; ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏û</h3>
                    <div class="about-info">
                        <p><strong>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏π‡∏ö‡∏¥‡∏ß</strong></p>
                        <p>Version 1.0.0</p>
                        <p class="about-tagline">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡∏ó‡∏µ‡∏•‡∏∞‡∏Å‡πâ‡∏≤‡∏ß &#128055;</p>
                    </div>
                </div>
            </section>

            <!-- ========== PAGE: CATEGORIES MANAGEMENT ========== -->
            <section id="page-categories" class="page" aria-labelledby="categoriesPageTitle">
                <div class="page-header">
                    <button class="back-btn" data-page="settings" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤">&lt;</button>
                    <h2 class="page-title" id="categoriesPageTitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h2>
                    <div class="header-spacer"></div>
                </div>

                <!-- Category Type Tabs -->
                <div class="category-tabs" role="tablist" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà">
                    <button class="category-tab active" data-cat-type="expense" role="tab"
                        aria-selected="true">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</button>
                    <button class="category-tab" data-cat-type="income" role="tab" aria-selected="false">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</button>
                </div>

                <!-- Add Category Form -->
                <div class="add-category-form">
                    <input type="text" id="newCategoryName" class="form-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà">
                    <button class="icon-select-btn" id="openIconPickerBtn" title="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô">
                        <span id="selectedIcon" aria-hidden="true">üí∞</span>
                    </button>
                    <button class="add-category-btn" id="addCategoryBtn">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                </div>

                <!-- Category List -->
                <div class="category-list" id="categoryList">
                    <!-- Categories will be rendered here -->
                </div>
            </section>

        </main>

        <!-- ==================== BOTTOM NAVIGATION ==================== -->
        <nav class="bottom-nav" role="navigation" aria-label="‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å">
            <button class="nav-item active" data-page="dashboard" aria-current="page">
                <span class="nav-icon" aria-hidden="true">&#127968;</span>
                <span class="nav-label">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
            </button>
            <button class="nav-item" data-page="transactions">
                <span class="nav-icon" aria-hidden="true">&#128221;</span>
                <span class="nav-label">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
            </button>
            <button class="nav-item add-btn" data-page="add" aria-label="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà">
                <span class="nav-icon" aria-hidden="true">üê∑</span>
            </button>
            <button class="nav-item" data-page="reports">
                <span class="nav-icon" aria-hidden="true">&#128202;</span>
                <span class="nav-label">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span>
            </button>
            <button class="nav-item" data-page="settings">
                <span class="nav-icon" aria-hidden="true">&#9881;&#65039;</span>
                <span class="nav-label">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
            </button>
        </nav>

        <!-- ==================== MODALS ==================== -->
        <!-- Budget Edit Modal -->
        <div class="modal" id="budgetModal" role="dialog" aria-modal="true" aria-labelledby="budgetModalTitle"
            aria-hidden="true">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <h3 class="modal-title" id="budgetModalTitle">&#128176; ‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</h3>
                <div class="form-group">
                    <label for="modalBudgetAmount">‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</label>
                    <input type="number" id="modalBudgetAmount" class="form-input" placeholder="20000" min="0">
                </div>
                <div class="modal-actions">
                    <button class="modal-btn secondary" id="cancelBudgetModal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button class="modal-btn primary" id="saveBudgetModal">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </div>
        </div>

        <!-- Confirm Delete Modal -->
        <div class="modal" id="deleteModal" role="dialog" aria-modal="true" aria-labelledby="deleteModalTitle"
            aria-hidden="true">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <h3 class="modal-title" id="deleteModalTitle">&#9888;&#65039; ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h3>
                <p class="modal-message" id="deleteModalMessage">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
                <div class="modal-actions">
                    <button class="modal-btn secondary" id="cancelDeleteModal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button class="modal-btn danger" id="confirmDeleteModal">‡∏•‡∏ö‡πÄ‡∏•‡∏¢</button>
                </div>
            </div>
        </div>

        <!-- Icon Picker Modal -->
        <div class="modal" id="iconPickerModal" role="dialog" aria-modal="true" aria-labelledby="iconPickerTitle"
            aria-hidden="true">
            <div class="modal-backdrop"></div>
            <div class="modal-content icon-picker-content">
                <div class="modal-header-simple">
                    <h3 class="modal-title" id="iconPickerTitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå üê∑‚ú®</h3>
                    <button class="close-modal-btn" id="closeIconPicker">&times;</button>
                </div>
                <div class="icon-grid" id="iconGrid">
                    <!-- Icons will be rendered here -->
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast" id="toast">
            <span class="toast-emoji" id="toastEmoji" aria-hidden="true">üê∑</span>
            <span class="toast-message" id="toastMessage"></span>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-pig" aria-hidden="true">üê∑</div>
            <span class="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span>
        </div>

    </div>

    <!-- Floating Decorations (Outside app container for safety) -->
    <div class="floating-decorations" aria-hidden="true">
        <div class="float-item float-heart">üíï</div>
        <div class="float-item float-star">‚≠ê</div>
        <div class="float-item float-sparkle">‚ú®</div>
        <div class="float-item float-heart2">üíñ</div>
        <div class="float-item float-star2">üåü</div>
    </div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer" aria-hidden="true"></div>

    <!-- JavaScript Files -->
    <script src="js/utils.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/sync.js"></script>
    <script src="js/app.js"></script>

    <!-- Register Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('SW registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>